<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista Editable</title>

    <script>
      function lanzarJs() {
        contador = 0;
        //Crea una llista ordenada que contengui el codi js dins de l’etiqueta <script>
        document.getElementById("addLi").addEventListener("click", function () {
          addLi();
        });

        var tagTitulo = document.createElement("p");
        var titulo = document.createTextNode("Elementos:");
        tagTitulo.appendChild(titulo);
        document.body.appendChild(tagTitulo);

        var miLista = document.createElement("ul");
        document.body.appendChild(miLista);
        document.getElementsByTagName("ul")[0].setAttribute("id", "miUl");

        function addLi() {
          //1. genero el li:
          let tagElemento = document.createElement("li");
          let id = "li" + contador++;
          tagElemento.setAttribute("id", id);
          let elemento = document.getElementById("miLi").value;
          tagElemento.innerHTML = elemento;

          //2. genero el botón de borrado:
          let botonBorrar = document.createElement("button");
          botonBorrar.style.marginLeft = "1%";
          botonBorrar.innerHTML = "borrar";
          botonBorrar.addEventListener("click", function() {borrarLi(id);});
          tagElemento.appendChild(botonBorrar);

          //3. lo meto en el documento:
          document.getElementById("miUl").appendChild(tagElemento);
          
        }

        function borrarLi(idLi) {
          //this.parentNode.remove(); ¿no funciona?
          let liBorrado = document.getElementById(idLi);
          liBorrado.remove();
        }
      }
    </script>
  </head>
  <body onload="lanzarJs();">
    <label for="miLi">Elemento <i>li</i>: </label>
    <input type="text" id="miLi" name="miLi" />
    <button id="addLi">añadir</button>
    <br />
  </body>
</html>
